<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="icon" type="image/png" href="icons/logo.png">
    <title>Yatzy Royale by: James Tercenio</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- INTRO ANIMATION -->
    <div id="intro-screen">
        <canvas id="intro-canvas"></canvas>
        <div id="intro-content">
            <div id="intro-dice-row">
                <div class="intro-die" id="idie-1"><svg viewBox="0 0 100 100"><rect rx="18" width="100" height="100"/><circle cx="50" cy="50" r="9"/></svg></div>
                <div class="intro-die" id="idie-2"><svg viewBox="0 0 100 100"><rect rx="18" width="100" height="100"/><circle cx="28" cy="28" r="9"/><circle cx="72" cy="72" r="9"/></svg></div>
                <div class="intro-die" id="idie-3"><svg viewBox="0 0 100 100"><rect rx="18" width="100" height="100"/><circle cx="28" cy="28" r="9"/><circle cx="50" cy="50" r="9"/><circle cx="72" cy="72" r="9"/></svg></div>
                <div class="intro-die" id="idie-4"><svg viewBox="0 0 100 100"><rect rx="18" width="100" height="100"/><circle cx="28" cy="28" r="9"/><circle cx="72" cy="28" r="9"/><circle cx="28" cy="72" r="9"/><circle cx="72" cy="72" r="9"/></svg></div>
                <div class="intro-die" id="idie-5"><svg viewBox="0 0 100 100"><rect rx="18" width="100" height="100"/><circle cx="28" cy="28" r="9"/><circle cx="72" cy="28" r="9"/><circle cx="50" cy="50" r="9"/><circle cx="28" cy="72" r="9"/><circle cx="72" cy="72" r="9"/></svg></div>
            </div>
            <div id="intro-logo-wrap">
                <div id="intro-tag">JAMES TERCENIO PRESENTS</div>
                <div id="intro-title">YATZY<span id="intro-royale"> ROYALE</span></div>
                <div id="intro-subtitle">PRO EDITION</div>
            </div>
            <div id="intro-scanline"></div>
        </div>
        <div id="intro-skip">TAP TO SKIP</div>
    </div>

    <canvas id="fire-canvas" style="display: none;"></canvas>
    <div id="party-overlay"></div>

    <div id="turn-modal">
        <div id="turn-modal-text" class="turn-modal-content">YOUR TURN</div>
    </div>

    <!-- HELL WARNING MODAL -->
    <div id="hell-notification-modal"
        style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:10000; justify-content:center; align-items:center; flex-direction:column; backdrop-filter:blur(12px);">
        <div class="modal-content" style="border-color: rgba(239,68,68,0.6); animation: shake 0.5s infinite;">
            <h1 style="color: #f87171; font-size: 2.8rem; margin: 0; letter-spacing: 4px;">⚠ WARNING</h1>
            <p id="hell-level-text" style="font-size: 1.4rem; margin: 20px 0; font-weight: 700; color: #fca5a5;"></p>
            <button class="difficulty-btn hell" onclick="closeHellModal()">I ACCEPT MY FATE</button>
        </div>
    </div>

    <!-- SCORE INFO MODAL -->
    <div id="score-info-modal" onclick="this.style.display='none'">
        <div class="modal-content">
            <h2 id="score-info-title">Category Name</h2>
            <p id="score-info-desc" style="font-size: 1.1rem; line-height: 1.6;"></p>
            <p style="font-size: 0.82rem; opacity: 0.4; margin-top: 20px; letter-spacing: 1px;">TAP ANYWHERE TO CLOSE
            </p>
        </div>
    </div>

    <!-- RESET MODAL -->
    <div id="reset-modal">
        <div class="modal-content">
            <h2>Reset Game?</h2>
            <p style="font-size: 1rem; margin-bottom: 28px;">Are you sure you want to quit? Your current progress will
                be lost.</p>
            <div class="btn-group">
                <button class="confirm-btn" onclick="location.reload()">YES, RESET</button>
                <button class="cancel-btn" onclick="toggleResetModal()">CANCEL</button>
            </div>
        </div>
    </div>

    <!-- RESULT MODAL -->
    <div id="result-modal">
        <div class="modal-content">
            <h1 id="result-title" style="font-size: 2.5rem; letter-spacing: 4px;">GAME OVER</h1>
            <p id="result-details" style="font-size: 1.2rem; margin-bottom: 30px;"></p>
            <button class="difficulty-btn easy" onclick="location.reload()">PLAY AGAIN</button>
        </div>
    </div>

    <!-- INFO MODAL -->
    <div id="info-modal">
        <div class="modal-content">
            <span
                style="position:absolute; top:16px; right:20px; cursor:pointer; font-size:1.4rem; opacity:0.6; transition:opacity 0.2s;"
                onmouseenter="this.style.opacity='1'" onmouseleave="this.style.opacity='0.6'"
                onclick="toggleInfo()">✖</span>
            <h2 style="letter-spacing: 3px;">GAME MECHANICS</h2>
            <ul style="line-height: 1.7; text-align: left; padding-left: 20px;">
                <li><strong>Upper Section:</strong> Count and add only the specific face value.</li>
                <li><strong>3 of a Kind:</strong> Total of all dice if 3 match.</li>
                <li><strong>4 of a Kind:</strong> Total of all dice if 4 match.</li>
                <li><strong>Full House:</strong> 25 pts for 3 of one kind + 2 of another.</li>
                <li><strong>Small Straight:</strong> 30 pts for 4 sequential dice.</li>
                <li><strong>Large Straight:</strong> 40 pts for 5 sequential dice.</li>
                <li><strong>Yatzy:</strong> 50 pts for all 5 dice matching.</li>
            </ul>
            <p style="margin-top: 24px; font-size: 0.82rem; opacity: 0.45; letter-spacing: 2px;">
                CREATED BY JAMES TERCENIO
            </p>
        </div>
    </div>

    <!-- LOBBY -->
    <div id="lobby">
        <img src="icons/logo.png" alt="Yatzy Royale Logo">
        <h1>YATZY ROYALE</h1>
        <p class="lobby-subtitle">Pro Edition</p>

        <div id="main-menu" class="menu-group">
            <button class="difficulty-btn med" onclick="toggleLobbyView(true)">VS BOT</button>
            <button class="difficulty-btn pvp" onclick="startGame('PVP')">PVP (Local)</button>
            <button class="info-trigger-btn" onclick="toggleInfo()">Game Info</button>
        </div>

        <div id="difficulty-menu" class="menu-group hidden">
            <p
                style="width:100%; font-size:0.72rem; font-weight:700; color:rgba(255,255,255,0.4); margin-bottom:4px; text-transform:uppercase; letter-spacing:4px;">
                Select Difficulty
            </p>
            <button class="difficulty-btn easy" onclick="startGame('EASY')">Easy</button>
            <button class="difficulty-btn med" onclick="startGame('MEDIUM')">Medium</button>
            <button class="difficulty-btn hard" onclick="startGame('HARD')">Hard</button>
            <button class="difficulty-btn hell" onclick="startGame('HELL')">⚡ Hell Mode</button>
            <button class="cancel-btn" onclick="toggleLobbyView(false)">← Back</button>
        </div>
    </div>

    <!-- GAME AREA -->
    <div class="game-container">

        <div class="top-right-ui">
            <div class="ui-box" id="difficulty-display">EASY</div>
            <button class="ui-box info-btn" onclick="toggleInfo()">GAME INFO</button>
            <button id="mute-btn" class="ui-box mute-btn" onclick="toggleMute()">MUTE MUSIC</button>
            <button class="ui-box reset-btn" onclick="toggleResetModal()">RESET GAME</button>
        </div>

        <div class="scores">
            <span id="p1-label">YOU: <span id="p-total">0</span></span>
            <span id="p2-label">BOT: <span id="b-total">0</span></span>
        </div>

        <div id="turn-banner" class="turn-indicator player-turn">YOUR TURN</div>

        <div class="score-grid" id="score-container"></div>

        <div class="controls-box">
            <div class="dice-area" id="dice-container"></div>
            <button id="roll-btn">ROLL DICE</button>
            <div class="rolls-left-label">ROLLS LEFT: <span id="rolls-left">3</span></div>
        </div>

    </div>

    <script>
    /* =====================
       INTRO ANIMATION
       ===================== */
    (function() {
        const intro    = document.getElementById('intro-screen');
        const lobby    = document.getElementById('lobby');
        const canvas   = document.getElementById('intro-canvas');
        const ctx      = canvas.getContext('2d');
        const dice     = document.querySelectorAll('.intro-die');
        const logoWrap = document.getElementById('intro-logo-wrap');
        const scanline = document.getElementById('intro-scanline');

        lobby.classList.add('intro-hidden');

        function resizeCanvas() {
            canvas.width  = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        const particles = Array.from({ length: 80 }, () => ({
            x:  Math.random() * window.innerWidth,
            y:  Math.random() * window.innerHeight,
            r:  Math.random() * 1.4 + 0.3,
            vx: (Math.random() - 0.5) * 0.35,
            vy: (Math.random() - 0.5) * 0.35,
            a:  Math.random() * 0.7 + 0.15,
        }));

        let animFrame;
        function drawGrid() {
            ctx.save();
            ctx.strokeStyle = 'rgba(56,189,248,0.045)';
            ctx.lineWidth = 1;
            const step = 60;
            for (let x = 0; x < canvas.width;  x += step) { ctx.beginPath(); ctx.moveTo(x,0); ctx.lineTo(x,canvas.height); ctx.stroke(); }
            for (let y = 0; y < canvas.height; y += step) { ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(canvas.width,y); ctx.stroke(); }
            ctx.restore();
        }
        function drawAll() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const g = ctx.createRadialGradient(canvas.width/2, canvas.height/2, 0, canvas.width/2, canvas.height/2, canvas.width*0.65);
            g.addColorStop(0, 'rgba(56,189,248,0.09)');
            g.addColorStop(1, 'transparent');
            ctx.fillStyle = g; ctx.fillRect(0,0,canvas.width,canvas.height);
            drawGrid();
            particles.forEach(p => {
                p.x += p.vx; p.y += p.vy;
                if (p.x<0) p.x=canvas.width; if (p.x>canvas.width) p.x=0;
                if (p.y<0) p.y=canvas.height; if (p.y>canvas.height) p.y=0;
                ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
                ctx.fillStyle = `rgba(56,189,248,${p.a})`; ctx.fill();
            });
            animFrame = requestAnimationFrame(drawAll);
        }
        drawAll();

        let done = false;
        function dismissIntro() {
            if (done) return; done = true;
            cancelAnimationFrame(animFrame);
            intro.classList.add('exit');
            lobby.classList.remove('intro-hidden');
            lobby.classList.add('intro-visible');
            setTimeout(() => { intro.style.display = 'none'; }, 900);
        }
        intro.addEventListener('click', dismissIntro);
        intro.addEventListener('touchstart', dismissIntro, { passive: true });

        // Dice appear one by one
        let delay = 320;
        dice.forEach((die, i) => setTimeout(() => die.classList.add('show'), delay + i * 130));

        // Dice settle into pulse
        setTimeout(() => {
            dice.forEach(d => { d.classList.remove('show'); d.style.opacity='1'; d.style.transform='none'; d.classList.add('final'); });
        }, delay + dice.length * 130 + 200);

        // Scanline sweep
        setTimeout(() => scanline.classList.add('sweep'), delay + dice.length * 130 + 360);

        // Logo reveal
        setTimeout(() => logoWrap.classList.add('show'), delay + dice.length * 130 + 520);

        // Auto dismiss
        setTimeout(dismissIntro, 4000);
    })();
    </script>
    <script src="script.js"></script>

</body>

</html>